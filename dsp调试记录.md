<h1 style="text-align:center">DSP调试记录</h1>

[TOC]



## 2022.03.06

​	测试dsp挂载五个mpu6050（实际挂载3个）的实际性能，mpu的读取频率为200HZ，采用分时复用的策略，实际读取中断的频率为1000HZ。

​	对控制逻辑的中断频率设置为200HZ和100HZ的情况进行测试，系统波特率为115200，控制中断中包括7个adc转换、一些乘除法运算和采集到的数据传输，实际发现如果需要传输完整的数据信息，200HZ完全不行，实际可能只有50HZ，同时发现自己写的uart_printf函数虽然方便，但是传输效率低，不如传统的直接发送。

​	然后将波特率强行提升至115200 * 10，在串口直连电脑时，200hz是可以的。使用蓝牙后，发现蓝牙无法设置1152000的波特率，然后降为460800（包括dsp），发现实际传输断断续续，估计可能是蓝牙不太行了，波特率有点高了。

​	优化方案：

	1. 优化传输数据的数据结构，减少整体的传输字节数。
 	2. 将控制中断的频率降低为100HZ。
 	3. 在进一步寻找蓝牙和dsp的波特率平衡点，比如 115200 * 2 或者 115200 * 3